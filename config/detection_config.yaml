# 检测场景配置

detection:
  # 检测场景列表
  scenarios:
    # 跌倒检测
    fall:
      enabled: true
      name: "跌倒检测"
      description: "检测老人是否跌倒"
      # 文本提示词（支持多个，取平均相似度）
      prompts:
        - "a person falling down"
        - "an elderly person fallen on the ground"
        - "someone lying on the floor"
      # 对比提示词（正常场景）
      negative_prompts:
        - "a person standing normally"
        - "walking around the room"
      # 相似度阈值（0-1之间）
      threshold: 0.25
      # 警报冷却时间（秒）
      cooldown: 30
      # 连续触发次数（连续N帧检测到才警报）
      consecutive_frames: 3
      # 警报级别：low, medium, high
      alert_level: "high"
    
    # 火灾检测
    fire:
      enabled: true
      name: "火灾检测"
      description: "检测是否有火灾发生"
      prompts:
        - "fire in a room"
        - "flames and smoke"
        - "burning fire"
      negative_prompts:
        - "normal indoor scene"
        - "bright light"
      threshold: 0.30
      cooldown: 60
      consecutive_frames: 5
      alert_level: "high"
    
    # 水淹检测（可选）
    flood:
      enabled: false
      name: "水淹检测"
      description: "检测地面是否被水淹"
      prompts:
        - "floor covered with water"
        - "flooding indoors"
        - "water on the ground"
      negative_prompts:
        - "clean dry floor"
      threshold: 0.28
      cooldown: 60
      consecutive_frames: 5
      alert_level: "medium"
  
  # 关键帧提取配置
  keyframe:
    # 提取方法：interval（固定间隔）或 scene（场景变化）
    method: "interval"
    # 固定间隔法：每N帧提取一次
    interval: 30
    # 场景变化法：相邻帧差异阈值
    scene_threshold: 0.3
    # 最小间隔帧数（避免过于频繁）
    min_interval: 15
  
  # 全局检测配置
  global:
    # 是否启用检测
    enabled: true
    # 是否显示检测结果（在画面上标注）
    show_results: true
    # 检测置信度显示
    show_confidence: true

# 警报配置
alert:
  # 警报输出方式
  output:
    # 打印到控制台
    console:
      enabled: true
      # 控制台颜色（支持ANSI颜色）
      use_color: true
    
    # 保存到日志文件
    log:
      enabled: true
      # 日志文件路径
      path: "data/logs/alerts.log"
      # 日志级别
      level: "INFO"
    
    # 保存警报图像
    save_frame:
      enabled: true
      # 保存路径
      path: "data/outputs/alerts"
      # 图像格式
      format: "jpg"
      # 是否保存原始帧
      save_original: true
  
  # 短信通知（拓展功能）
  sms:
    enabled: false
    # API提供商：aliyun, tencent, twilio
    provider: "aliyun"
    # API配置（请设置环境变量或单独配置文件）
    api_key: "${SMS_API_KEY}"
    api_secret: "${SMS_API_SECRET}"
    # 短信模板ID
    template_id: "SMS_12345678"
    # 接收短信的手机号列表
    contacts:
      - "+86138XXXXXXXX"
    # 短信限流（防止频繁发送）
    rate_limit:
      # 最小间隔（秒）
      min_interval: 300
      # 每小时最大短信数
      max_per_hour: 5
  
  # 邮件通知（拓展功能）
  email:
    enabled: false
    smtp_server: "smtp.gmail.com"
    smtp_port: 587
    username: "${EMAIL_USERNAME}"
    password: "${EMAIL_PASSWORD}"
    from_addr: "dlc-alert@example.com"
    to_addrs:
      - "user@example.com"
    subject_template: "[DLC警报] {scenario} - {timestamp}"

# 系统配置
system:
  # 日志配置
  logging:
    level: "INFO"  # DEBUG, INFO, WARNING, ERROR
    format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
    # 日志文件配置
    file:
      enabled: true
      path: "data/logs/system.log"
      # 日志轮转
      max_bytes: 10485760  # 10MB
      backup_count: 5
  
  # 性能配置
  performance:
    # 是否启用性能监控
    enable_profiling: false
    # FPS显示
    show_fps: true
