# GUI æ¨¡å—æ–‡æ¡£ç´¢å¼•

## ğŸ“š æ–‡æ¡£å¯¼èˆª

### ç”¨æˆ·æ–‡æ¡£

- **[ç”¨æˆ·è¾“å…¥æ¥å£æŒ‡å—](USER_INPUT_INTERFACE.md)** â­ **æ¨èé¦–å…ˆé˜…è¯»**
  - å¿«é€Ÿå¼€å§‹ï¼š3è¡Œä»£ç è·å–ç”¨æˆ·é…ç½®
  - æ ¸å¿ƒæ¦‚å¿µï¼šé…ç½®å…±äº«æœºåˆ¶
  - å¸¸ç”¨åœºæ™¯ç¤ºä¾‹
  - é€‚åˆï¼šéœ€è¦è·å–ç”¨æˆ·è¾“å…¥çš„åä½œè€…

### API å‚è€ƒ

- **[SettingsPanel API å®Œæ•´æ–‡æ¡£](SETTINGS_PANEL_API.md)**
  - æ‰€æœ‰å…¬å¼€æ¥å£çš„è¯¦ç»†è¯´æ˜
  - å‚æ•°ã€è¿”å›å€¼ã€ä½¿ç”¨ç¤ºä¾‹
  - å®Œæ•´çš„é›†æˆæ¡ˆä¾‹
  - é€‚åˆï¼šéœ€è¦æ·±å…¥äº†è§£APIç»†èŠ‚çš„å¼€å‘è€…

### æŠ€æœ¯å®ç°

- **[æ‘„åƒå¤´è§†é¢‘æµå®ç°](CAMERA_FLOW.md)**
  - è§†é¢‘æ•è·ä¸æ˜¾ç¤ºçš„æŠ€æœ¯ç»†èŠ‚
  - 60fps ä¼˜åŒ–å®ç°
  - é¢œè‰²ç©ºé—´è½¬æ¢
  - é€‚åˆï¼šéœ€è¦äº†è§£åº•å±‚å®ç°çš„å¼€å‘è€…

- **[ç³»ç»Ÿæ¶æ„è¯´æ˜](ARCHITECTURE.md)**
  - å®Œæ•´çš„ç³»ç»Ÿæ¶æ„å›¾
  - æ•°æ®æµå‘å›¾
  - æ¥å£è°ƒç”¨æµç¨‹
  - è®¾è®¡åŸåˆ™ä¸æ‰©å±•æ€§
  - é€‚åˆï¼šéœ€è¦ç†è§£æ•´ä½“æ¶æ„çš„å¼€å‘è€…

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æˆ‘æƒ³è¦è·å–ç”¨æˆ·è¾“å…¥çš„é…ç½®

```python
from gui.settings_panel import SettingsPanel

# åˆ›å»ºè®¾ç½®é¢æ¿
panel = SettingsPanel(root)

# è·å–é…ç½®
config = panel.get_scene_config()

print(f"ç”¨æˆ·é€‰æ‹©çš„åœºæ™¯: {config['scene_type']}")
print(f"å…‰ç…§æ¡ä»¶: {config['light_condition']}")
```

**è¯¦ç»†æ–‡æ¡£:** [ç”¨æˆ·è¾“å…¥æ¥å£æŒ‡å—](USER_INPUT_INTERFACE.md)

---

### æˆ‘æƒ³è¦è¿è¡ŒGUIç¤ºä¾‹

```bash
# æ— éœ€GUIçš„ç®€åŒ–ç¤ºä¾‹
python examples/settings_api_simple_demo.py

# å®Œæ•´GUIç¤ºä¾‹ï¼ˆéœ€è¦å›¾å½¢ç•Œé¢ï¼‰
python gui/main_window.py
```

**ç¤ºä¾‹ä»£ç :**
- [ç®€åŒ–ç¤ºä¾‹](../examples/settings_api_simple_demo.py) - å±•ç¤ºæ¥å£ç”¨æ³•ï¼Œæ— éœ€GUI
- [å®Œæ•´ç¤ºä¾‹](../examples/settings_panel_api_demo.py) - éœ€è¦GUIç¯å¢ƒ

---

### æˆ‘æƒ³è¦é›†æˆæ£€æµ‹æ¨¡å—

```python
class MyDetector:
    def __init__(self, settings_panel):
        self.panel = settings_panel
    
    def detect(self, frame):
        # è·å–ç”¨æˆ·é…ç½®
        config = self.panel.get_scene_config()
        
        # æ ¹æ®åœºæ™¯é€‰æ‹©æç¤ºè¯
        scene = config["scene_type"]
        prompts = self.get_prompts_for_scene(scene)
        
        # æ ¹æ®å…‰ç…§è°ƒæ•´é˜ˆå€¼
        light = config["light_condition"]
        threshold = {"bright": 0.3, "normal": 0.25, "dim": 0.2}[light]
        
        # æ‰§è¡Œæ£€æµ‹...
        return self.clip_detect(frame, prompts, threshold)
```

**è¯¦ç»†æ–‡æ¡£:** [ç”¨æˆ·è¾“å…¥æ¥å£æŒ‡å— - é›†æˆç¤ºä¾‹](USER_INPUT_INTERFACE.md#å®Œæ•´é›†æˆç¤ºä¾‹)

---

## ğŸ“– æ–‡æ¡£æ¦‚è§ˆ

### 1. ç”¨æˆ·è¾“å…¥æ¥å£æŒ‡å— (USER_INPUT_INTERFACE.md)

**ç›®æ ‡è¯»è€…:** éœ€è¦è·å–ç”¨æˆ·é…ç½®çš„åä½œè€…

**å†…å®¹:**
- âœ… å¿«é€Ÿç´¢å¼•ï¼ˆæŒ‰éœ€æ±‚æŸ¥æ‰¾ï¼‰
- âœ… TL;DRç‰ˆæœ¬ï¼ˆ3è¡Œä»£ç ä¸Šæ‰‹ï¼‰
- âœ… æ ¸å¿ƒæ¦‚å¿µï¼ˆé…ç½®å…±äº«æœºåˆ¶ï¼‰
- âœ… æ ¸å¿ƒæ¥å£è¯¦è§£ï¼ˆ9ä¸ªä¸»è¦æ¥å£ï¼‰
- âœ… å®Œæ•´é›†æˆç¤ºä¾‹
- âœ… å¸¸è§é—®é¢˜è§£ç­”

**é€‚åˆåœºæ™¯:**
- åˆšå¼€å§‹ä½¿ç”¨æ¥å£
- éœ€è¦å¿«é€Ÿä¸Šæ‰‹
- æƒ³çœ‹å®é™…ç¤ºä¾‹

---

### 2. SettingsPanel API æ–‡æ¡£ (SETTINGS_PANEL_API.md)

**ç›®æ ‡è¯»è€…:** éœ€è¦æ·±å…¥äº†è§£APIçš„å¼€å‘è€…

**å†…å®¹:**
- âœ… å®Œæ•´çš„æ–¹æ³•ç­¾å
- âœ… è¯¦ç»†çš„å‚æ•°è¯´æ˜
- âœ… è¿”å›å€¼ç»“æ„å®šä¹‰
- âœ… å¤šç§ä½¿ç”¨ç¤ºä¾‹
- âœ… æœ€ä½³å®è·µæŒ‡å—
- âœ… APIé€ŸæŸ¥è¡¨

**é€‚åˆåœºæ™¯:**
- éœ€è¦APIçš„è¯¦ç»†è§„æ ¼
- å¼€å‘å¤æ‚åŠŸèƒ½
- éœ€è¦ç±»å‹ä¿¡æ¯

---

### 3. æ‘„åƒå¤´è§†é¢‘æµå®ç° (CAMERA_FLOW.md)

**ç›®æ ‡è¯»è€…:** éœ€è¦äº†è§£è§†é¢‘å¤„ç†å®ç°çš„å¼€å‘è€…

**å†…å®¹:**
- âœ… è§†é¢‘æ•è·æµç¨‹
- âœ… 60fpsä¼˜åŒ–
- âœ… é¢œè‰²ç©ºé—´è½¬æ¢
- âœ… å›¾åƒæ ¼å¼è½¬æ¢é“¾
- âœ… æ€§èƒ½ä¼˜åŒ–æŠ€å·§

**é€‚åˆåœºæ™¯:**
- ä¿®æ”¹è§†é¢‘å¤„ç†é€»è¾‘
- æ€§èƒ½ä¼˜åŒ–
- æ•…éšœæ’æŸ¥

---

## ğŸ” æŒ‰éœ€æ±‚æŸ¥æ‰¾æ–‡æ¡£

| æˆ‘æƒ³è¦... | æŸ¥çœ‹æ–‡æ¡£ |
|---------|---------|
| è·å–ç”¨æˆ·é€‰æ‹©çš„åœºæ™¯ç±»å‹ | [ç”¨æˆ·è¾“å…¥æ¥å£ â†’ è·å–åœºæ™¯ç±»å‹](USER_INPUT_INTERFACE.md#è·å–åœºæ™¯ç±»å‹) |
| è·å–å®Œæ•´é…ç½® | [ç”¨æˆ·è¾“å…¥æ¥å£ â†’ è·å–å®Œæ•´é…ç½®](USER_INPUT_INTERFACE.md#è·å–å®Œæ•´é…ç½®) |
| æ ¹æ®å…‰ç…§è°ƒæ•´æ£€æµ‹ | [ç”¨æˆ·è¾“å…¥æ¥å£ â†’ è·å–å…‰ç…§æ¡ä»¶](USER_INPUT_INTERFACE.md#è·å–å…‰ç…§æ¡ä»¶) |
| å¤„ç†æ£€æµ‹ç»“æœåè§¦å‘æŠ¥è­¦ | [ç”¨æˆ·è¾“å…¥æ¥å£ â†’ è·å–æŠ¥è­¦è®¾ç½®](USER_INPUT_INTERFACE.md#è·å–æŠ¥è­¦è®¾ç½®) |
| åŠ¨æ€åˆ‡æ¢åœºæ™¯ | [ç”¨æˆ·è¾“å…¥æ¥å£ â†’ åˆ‡æ¢åœºæ™¯](USER_INPUT_INTERFACE.md#åˆ‡æ¢åœºæ™¯) |
| æ·»åŠ è‡ªå®šä¹‰åœºæ™¯ | [ç”¨æˆ·è¾“å…¥æ¥å£ â†’ æ·»åŠ åœºæ™¯](USER_INPUT_INTERFACE.md#æ·»åŠ åœºæ™¯) |
| äº†è§£æ‰€æœ‰å¯ç”¨æ¥å£ | [APIæ–‡æ¡£ â†’ APIé€ŸæŸ¥è¡¨](SETTINGS_PANEL_API.md#å®Œæ•´-api-é€ŸæŸ¥è¡¨) |
| æŸ¥çœ‹è¯¦ç»†çš„æ–¹æ³•ç­¾å | [APIæ–‡æ¡£ â†’ ä¸»è¦æ¥å£è¯´æ˜](SETTINGS_PANEL_API.md#ä¸»è¦æ¥å£è¯´æ˜) |
| äº†è§£é…ç½®æ•°æ®ç»“æ„ | [APIæ–‡æ¡£ â†’ é…ç½®æ•°æ®ç»“æ„](SETTINGS_PANEL_API.md#é…ç½®æ•°æ®ç»“æ„) |
| å®ç°é…ç½®æŒä¹…åŒ– | [ç”¨æˆ·è¾“å…¥æ¥å£ â†’ ç¤ºä¾‹2](USER_INPUT_INTERFACE.md#ç¤ºä¾‹2-é…ç½®æŒä¹…åŒ–) |
| ä¸æ£€æµ‹æ¨¡å—é›†æˆ | [ç”¨æˆ·è¾“å…¥æ¥å£ â†’ ç¤ºä¾‹1](USER_INPUT_INTERFACE.md#ç¤ºä¾‹1-ä¸æ£€æµ‹å¾ªç¯é›†æˆ) |
| äº†è§£è§†é¢‘å¤„ç†æµç¨‹ | [è§†é¢‘æµå®ç° â†’ è§†é¢‘å¤„ç†æµç¨‹](CAMERA_FLOW.md) |
| ä¼˜åŒ–è§†é¢‘æ€§èƒ½ | [è§†é¢‘æµå®ç° â†’ è§†é¢‘å¸§ç‡ä¼˜åŒ–](CAMERA_FLOW.md) |

---

## ğŸ’» ç¤ºä¾‹ä»£ç 

### ç¤ºä¾‹1: ç®€åŒ–ç¤ºä¾‹ï¼ˆæ— éœ€GUIï¼‰

```bash
python examples/settings_api_simple_demo.py
```

**åŒ…å«ç¤ºä¾‹:**
1. è¯»å–ç”¨æˆ·é…ç½®
2. ä¿®æ”¹é…ç½®
3. æ·»åŠ æ–°åœºæ™¯
4. ä¸æ£€æµ‹æ¨¡å—é›†æˆ
5. é…ç½®æŒä¹…åŒ–
6. çœŸå®ä½¿ç”¨åœºæ™¯

---

### ç¤ºä¾‹2: å®Œæ•´GUIç¤ºä¾‹

```bash
python examples/settings_panel_api_demo.py
```

**åŒ…å«ç¤ºä¾‹:**
1. è·å–åœºæ™¯é…ç½®
2. è®¾ç½®åœºæ™¯é…ç½®
3. æ·»åŠ è‡ªå®šä¹‰åœºæ™¯
4. ä¸æ£€æµ‹å™¨é›†æˆ
5. é…ç½®æŒä¹…åŒ–
6. çœŸå®ä¸–ç•Œç”¨æ³•

**æ³¨æ„:** éœ€è¦GUIç¯å¢ƒï¼ˆmacOSå¯èƒ½éœ€è¦ç‰¹å®šç‰ˆæœ¬ï¼‰

---

### ç¤ºä¾‹3: ä¸»çª—å£

```bash
python gui/main_window.py
```

**åŠŸèƒ½:**
- å®æ—¶è§†é¢‘é¢„è§ˆ
- åœºæ™¯é…ç½®
- 60fpsæ˜¾ç¤º
- å®Œæ•´çš„ç”¨æˆ·ç•Œé¢

---

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°çš„é…ç½®é¡¹

1. **åœ¨ app_config ä¸­æ·»åŠ å­—æ®µ**

```python
app_config["scene"]["new_field"] = default_value
```

2. **åœ¨ SettingsPanel æ·»åŠ UIæ§ä»¶**

```python
# åœ¨ _create_scene_page() ä¸­
self.new_field_var = tk.StringVar(value=self.app_config["scene"]["new_field"])
```

3. **æ·»åŠ å…¬å¼€æ¥å£**

```python
def get_new_field(self) -> str:
    """è·å–æ–°å­—æ®µçš„å€¼"""
    return self.app_config["scene"]["new_field"]
```

4. **æ›´æ–°æ–‡æ¡£**

åœ¨ `SETTINGS_PANEL_API.md` å’Œ `USER_INPUT_INTERFACE.md` ä¸­æ·»åŠ è¯´æ˜ã€‚

---

### è°ƒè¯•æŠ€å·§

#### æŸ¥çœ‹å½“å‰é…ç½®

```python
import json

config = panel.get_scene_config()
print(json.dumps(config, indent=2, ensure_ascii=False))
```

#### ç›‘å¬é…ç½®å˜åŒ–

```python
last_config = None

while True:
    current_config = panel.get_scene_config()
    
    if current_config != last_config:
        print("é…ç½®å·²å˜åŒ–:")
        for key in current_config:
            if current_config[key] != last_config.get(key):
                print(f"  {key}: {last_config.get(key)} â†’ {current_config[key]}")
        last_config = current_config
```

---

## ğŸ› å¸¸è§é—®é¢˜

### Q: å¦‚ä½•è·å–ç”¨æˆ·è¾“å…¥çš„æ–‡æœ¬ï¼Ÿ

**A:** ä½¿ç”¨ `get_scene_config()` æˆ– `get_current_scene_type()`

```python
scene = panel.get_current_scene_type()  # "æ‘”å€’"
```

---

### Q: é…ç½®ä¿®æ”¹åéœ€è¦æ‰‹åŠ¨åŒæ­¥å—ï¼Ÿ

**A:** ä¸éœ€è¦ï¼Œé€šè¿‡å¼•ç”¨ä¼ é€’è‡ªåŠ¨åŒæ­¥

```python
# ç”¨æˆ·åœ¨GUIä¿®æ”¹ â†’ app_config è‡ªåŠ¨æ›´æ–°
config = panel.get_scene_config()  # æ€»æ˜¯æœ€æ–°å€¼
```

---

### Q: å¯ä»¥ä¸åˆ›å»ºGUIå°±ä½¿ç”¨æ¥å£å—ï¼Ÿ

**A:** å¯ä»¥ï¼Œç›´æ¥æ“ä½œ app_config å­—å…¸

```python
app_config = {"scene": {...}, "scene_types": [...]}
scene = app_config["scene"]["scene_type"]
```

---

### Q: ç¤ºä¾‹ä»£ç åœ¨macOSä¸Šè¿è¡Œå¤±è´¥ï¼Ÿ

**A:** ä½¿ç”¨ç®€åŒ–ç‰ˆç¤ºä¾‹ï¼ˆæ— éœ€GUIï¼‰

```bash
python examples/settings_api_simple_demo.py
```

---

## ğŸ“ è·å–å¸®åŠ©

- **æŸ¥çœ‹æ–‡æ¡£:** ä¼˜å…ˆé˜…è¯» [ç”¨æˆ·è¾“å…¥æ¥å£æŒ‡å—](USER_INPUT_INTERFACE.md)
- **è¿è¡Œç¤ºä¾‹:** `python examples/settings_api_simple_demo.py`
- **æŸ¥çœ‹æºç :** `gui/settings_panel.py` ä¸­çš„å…¬å¼€æ¥å£éƒ¨åˆ†

---

## ğŸ“ è´¡çŒ®æŒ‡å—

### æ›´æ–°æ–‡æ¡£

1. ä¿®æ”¹å¯¹åº”çš„ `.md` æ–‡ä»¶
2. æ›´æ–°æœ¬ README çš„ç´¢å¼•
3. è¿è¡Œç¤ºä¾‹ä»£ç éªŒè¯

### æ·»åŠ ç¤ºä¾‹

1. åœ¨ `examples/` ç›®å½•æ·»åŠ ç¤ºä¾‹æ–‡ä»¶
2. åœ¨æœ¬ README çš„"ç¤ºä¾‹ä»£ç "éƒ¨åˆ†æ·»åŠ è¯´æ˜
3. åœ¨ç›¸å…³æ–‡æ¡£ä¸­å¼•ç”¨ç¤ºä¾‹

---

**æ–‡æ¡£ç»´æŠ¤è€…:** LXR 
**æœ€åæ›´æ–°:** 2025å¹´11æœˆ11æ—¥  
**ç‰ˆæœ¬:** v1.0
