# æ‘„åƒå¤´è§†é¢‘æµå®ç°é€»è¾‘

## ğŸ“‹ æµç¨‹å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç”¨æˆ·ç‚¹å‡»"å¼€å§‹æ£€æµ‹"   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
````markdown
# æ‘„åƒå¤´è§†é¢‘æµå®ç°é€»è¾‘ï¼ˆä»…ä¿ç•™æœ¬åœ°æ‘„åƒå¤´ï¼‰

## ï¿½ æµç¨‹å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç”¨æˆ·ç‚¹å‡»"å¼€å§‹æ£€æµ‹"   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ OpenCVæ‰“å¼€æœ¬åœ°æ‘„åƒå¤´(0)  â”‚ â†â”€â”€ cv2.VideoCapture(0)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   è¯»å–è§†é¢‘å¸§ (å¾ªç¯)   â”‚ â†â”€â”€ ret, frame = video_capture.read()
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ BGR â†’ RGB è½¬æ¢         â”‚ â†â”€â”€ cv2.cvtColor(frame, cv2.COLOR_BGR2RGB)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è°ƒæ•´å¤§å°ï¼ˆä¿æŒå®½é«˜æ¯”ï¼‰  â”‚ â†â”€â”€ _resize_frame(frame_rgb, width, height)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è½¬æ¢ä¸º PIL.Image             â”‚ â†â”€â”€ Image.fromarray(frame_resized)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è½¬æ¢ä¸º ImageTk.PhotoImage    â”‚ â†â”€â”€ ImageTk.PhotoImage(image=image)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Tkinter Canvas æ˜¾ç¤ºå›¾åƒ  â”‚ â†â”€â”€ canvas.create_image(x, y, image=photo)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 17msåç»§ç»­ä¸‹ä¸€å¸§ (60fps)  â”‚ â†â”€â”€ root.after(17, update_video_frame)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”‘ æ ¸å¿ƒä»£ç å®ç°

### 1. å¯åŠ¨è§†é¢‘æµ (`_start_video_stream`)

```python
def _start_video_stream(self) -> None:
    # ä»…æ”¯æŒæœ¬åœ°æ‘„åƒå¤´ (è®¾å¤‡IDä¸º0)
    self.video_capture = cv2.VideoCapture(0)
    # è®¾ç½®ç¼“å†²åŒºï¼Œå‡å°‘å»¶è¿Ÿ
    self.video_capture.set(cv2.CAP_PROP_BUFFERSIZE, 1)
    # æ£€æŸ¥æ˜¯å¦æˆåŠŸæ‰“å¼€
    if not self.video_capture.isOpened():
        # é”™è¯¯å¤„ç†
        return
    # å¯åŠ¨å¸§æ›´æ–°å¾ªç¯
    self._update_video_frame()
```

### 2. æ›´æ–°è§†é¢‘å¸§ (`_update_video_frame`)

```python
def _update_video_frame(self) -> None:
    # ========== æ­¥éª¤1: è¯»å–è§†é¢‘å¸§ ==========
    ret, frame = self.video_capture.read()
    if ret:
        # ========== æ­¥éª¤2: BGR â†’ RGB è½¬æ¢ ==========
        frame_rgb = cv2.cvtColor(frame, cv2.COLOR_BGR2RGB)
        # ========== æ­¥éª¤3: è°ƒæ•´å¤§å° ==========
        frame_resized = self._resize_frame(frame_rgb, width, height)
        # ========== æ­¥éª¤4: è½¬æ¢ä¸ºPILå›¾åƒ ==========
        image = Image.fromarray(frame_resized)
        # ========== æ­¥éª¤5: è½¬æ¢ä¸ºImageTkæ ¼å¼ ==========
        photo = ImageTk.PhotoImage(image=image)
        # ========== æ­¥éª¤6: åœ¨Canvasä¸Šæ˜¾ç¤º ==========
        self.video_canvas.create_image(width // 2, height // 2, image=photo, anchor=tk.CENTER)
        # ä¿æŒå¼•ç”¨ï¼Œé˜²æ­¢è¢«åƒåœ¾å›æ”¶
        self.video_canvas.image = photo
    # ========== æ­¥éª¤7: è°ƒåº¦ä¸‹ä¸€å¸§ (60fps) ==========
    self.update_id = self.root.after(17, self._update_video_frame)
```

## ğŸ® æ§åˆ¶åŠŸèƒ½

| æ“ä½œ | åŠŸèƒ½ |
|------|------|
| â–¶ å¼€å§‹æ£€æµ‹ | å¯åŠ¨æœ¬åœ°æ‘„åƒå¤´å¹¶å¼€å§‹æ˜¾ç¤º |
| â¸ æš‚åœ | æš‚åœè§†é¢‘æ’­æ”¾ï¼ˆä¸é‡Šæ”¾èµ„æºï¼‰ |
| â¹ åœæ­¢ | åœæ­¢è§†é¢‘æµå¹¶é‡Šæ”¾æ‰€æœ‰èµ„æº |

## ğŸ” è°ƒè¯•ä¿¡æ¯

ç¨‹åºä¼šåœ¨æ§åˆ¶å°è¾“å‡ºä»¥ä¸‹ä¿¡æ¯ï¼š

```
æ­£åœ¨æ‰“å¼€æœ¬åœ°æ‘„åƒå¤´...
æœ¬åœ°æ‘„åƒå¤´å·²å¯åŠ¨
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **æ‘„åƒå¤´æƒé™**: macOSéœ€è¦æˆäºˆç»ˆç«¯/Pythonæ‘„åƒå¤´è®¿é—®æƒé™
2. **æ€§èƒ½**: é«˜åˆ†è¾¨ç‡è§†é¢‘å¯èƒ½éœ€è¦æ›´å¼ºçš„CPU
3. **åƒåœ¾å›æ”¶**: å¿…é¡»ä¿æŒPhotoImageçš„å¼•ç”¨

## ğŸ“š ç›¸å…³æ–‡æ¡£

- `main_window.py` - ä¸»çª—å£å®ç°ä»£ç 

````
    frame_height, frame_width = frame.shape[:2]
